{{inject 'passwordRequirements' settings.password_requirements}}
{{#partial "page"}}

{{#skip}}
<div class="container create-account">

    <div class="account account--fixed">
        <div class="account-body">
            {{#if forms.create_account.error}}
                {{> components/common/alert-error forms.create_account.error}}
               
            {{/if}}
            {{#if settings.account_creation_enabled}}
      
                 <form action="{{urls.auth.save_new_account}}" data-create-account-form method="post" class="form">
                    <div class="form-row form-row--half">
                        {{#each forms.create_account.address_fields }}
                        {{#or  (if name '==' 'FormField[2][42]') }}
                        {{else}}
                            {{{dynamicComponent 'components/common/forms'}}}
                            {{/or}}
                        {{/each}}
                        {{#each forms.create_account.account_fields }}
                        
             
                          {{#or (if name '==' 'FormField[1][33]') (if name '==' 'FormField[1][34]') (if name '==' 'FormField[1][35]') (if name '==' 'FormField[1][44]')}}
                          
                          {{else}}
                            {{{dynamicComponent 'components/common/forms'}}}
                            {{/or}}
                        {{/each}}
                       
                        {{inject 'required' (lang 'common.required')}}
                        {{inject 'state_error' (lang 'errors.state_error')}}
                    </div>
                     {{{ forms.create_account.recaptcha.markup}}}

                    

                    <!-- Address Fields - Role field -->
                    <input id="address-role" type="hidden" name="FormField[2][36]" value="Parent/Consumers" />  

                    <div class="form-actions">
                        <input type="submit" class="btn btn--sm btn--brand" value="Register" style="border:0;padding: 1rem 5rem;
                        font-weight: bold;" />
                    </div>
                </form>
                
                
        
                
            {{/if}}
        </div>
    </div>
</div>
 {{/skip}}
 <div class="container create-account">
  

    <div class="account account--fixed">
        <div class="account-body">
            {{#if forms.create_account.error}}
             <h3>Create account failed</h3>
                <h5>Kindly check the required fields</h5>
                <br>
                {{> components/common/alert-error forms.create_account.error}}
                
            {{/if}}
            {{#if settings.account_creation_enabled}}
         
                <form action="{{urls.auth.save_new_account}}" data-create-account-form method="post" class="form">
                    <div class="form-row form-row--half">
                        {{#each forms.create_account.address_fields }}
                        {{{dynamicComponent 'components/common/forms'}}}
                        {{/each}}
                        {{#each forms.create_account.account_fields }}
                            {{#if name '!=' 'FormField[1][27]'}}
                            {{{dynamicComponent 'components/common/forms'}}}
                            {{/if}}
                        {{/each}}
                   
                        {{inject 'required' (lang 'common.required')}} 
                        {{inject 'state_error' (lang 'errors.state_error')}}
                    </div>                    

                    <!-- Address Fields - Role field -->
                    <input id="address-role" type="hidden" name="FormField[2][36]" value="Parent/Consumers" />  

                     {{{ forms.create_account.recaptcha.markup}}}
                    <div class="form-actions">
                        <input type="submit" class="btn btn--primary expanded" value="Create an account" style="border:0;padding: 1rem 5rem;
                        font-weight: bold;" />
                    </div>
                </form>
                        
                
            {{/if}}
        </div>
    </div>
</div>
<style>
#FormField_36,
#FormField_37,
    #FormField_49,
    #FormField_38,
    #FormField_42,
    #FormField_35,
    #FormField_33,
    #FormField_48{
        display:none;
    }
    .account--fixed{
            padding-top: 100px;
    padding-bottom: 100px;
    }
    .form{
            margin-top: 80px;
    }
    .account-body h3,
    .account-body h5{
        text-align: center;
    }
    #FormField_1{
        width:100%;
    }
    div#FormField_31{
        display: block;
    }
    .form-row--half>.form-field:nth-child(odd){
        clear:none;
    }
</style>
{{/partial}}
{{> layout/base}}

<script>
    function initPrimaryRoleCallback() {
        const primaryRole = document.getElementById("FormField_34_select");
        if(primaryRole) {
            primaryRole.addEventListener("change", function(ev) {
                const addressRole = document.getElementById("address-role");
                addressRole.value = ev.target.value
                console.log("val", ev.target.value);
            });
        }        
    }

    initPrimaryRoleCallback();
    
</script>